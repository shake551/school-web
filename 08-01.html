<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="description" content="jp270405060806010119141435545satxebsyhs7">
<title>JavaScript入門8</title>
<script type="text/javascript">
  var part = 1;
  window.addEventListener("load",
    function() {
      var elm = document.getElementById( "btn" );
      elm.addEventListener( "click", getImage, false );
    },
    false );
  function getImage(){
    if( part == 5 ){
      return;
    }
    var elmDest = document.getElementById( "images" );
    //Ajax　　    　　  //
    var req = new XMLHttpRequest();
    var file = "share/imglist"+part+".html";
    req.open("GET", file+"?r="+Math.random());
    req.onreadystatechange = function() {
      if(req.readyState == 4 && req.status == 200){
        elmDest.innerHTML += req.responseText;
      }
    };
    req.send();
    part ++;
  } 
</script>
</head>
<body>

<h1>画像リスト</h1>
<p id="images"></p>
<p id="btn">もっと見る</p>
</body>
</html>

